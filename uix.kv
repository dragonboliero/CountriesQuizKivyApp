#Default values for button type used in main menu
<MDFillRoundFlatIconButton>
    font_size: '30sp'
    size_hint: (None,0.15)

#Predefined values for back buttons in quiz screens
<MDIconButton>
    icon: 'backspace-outline'
    pos_hint:{'center_y':0.55}
    on_press: app.reload_countries_list()

#Predefined values for lables
<MDLabel>
    halign: 'center'

#Predefined values for images used in flags quiz screen
<Image>
    size_hint: (0.4,0.3)

#Predefined values for buttons used in flags quiz screen
<Button>
    size_hint: (0.4,0.3)
    opacity:0



#Screen manager containing all available screens
SManager:
    id: 'screenm'
    MainMenu:
    Capitals:
    Flags:
    Continents:
    HiScores:
    TemplateScreen:


#Screen used as a template for other screens
<TemplateScreen>
    name: 'TemplateScreen'
    MDCard:
        size_hint: (1,1)
        pos_hint: {"center_x":0.5,"center_y":0.5}
        md_bg_color: app.bg_color


<MainMenu>
    name: 'MainScreen'
    MDBoxLayout:
        orientation: 'vertical'
        MDBoxLayout:
            orientation:'vertical'
            size_hint_y:0.25
            MDLabel:
                text:"Countries Quiz App"
                font_style:"H4"
            AnchorLayout:
                anchor_x: 'center'
                Image:
                    source:'data/icons/globe.png'
                    size_hint:1,1

        MDGridLayout:
            size_hint_y: 0.65
            columns:2
            rows:2
            padding: [dp(20),dp(20),dp(20),dp(20)]
            spacing: dp(20)
            MainMenuButton:
                text:"Capitals"
                subtext:"Guess all capitals of the world."
                image:'data/icons/capitals_mode.png'
                on_release: root.manager.current = 'CapitalsScreen'; app.assign_country_to_label(0); root.manager.get_screen('CapitalsScreen').ids.capitals_toolbar.correct_answer = 'Correct answers: 0'; root.manager.get_screen('CapitalsScreen').ids.capitals_toolbar.streak = 'Current streak: 0'; root.manager.get_screen('CapitalsScreen').ids.capitals_toolbar.score = 'Score: 0'; app.assign_flag()
            MainMenuButton:
                text:"Flags"
                subtext:"Do you know flags of all countries?"
                image:'data/icons/flags_mode.png'
                on_release: root.manager.current = 'FlagsScreen'; app.pick_flag(); root.manager.get_screen('FlagsScreen').ids.flag_toolbar.score='Score: 0';root.manager.get_screen('FlagsScreen').ids.flag_toolbar.correct_answers='Correct answers: 0';root.manager.get_screen('FlagsScreen').ids.flag_toolbar.streak='Current streak: 0' 
            MainMenuButton:
                text:"Continents"
                subtext:"Pick continents for all countries."
                image:'data/icons/continents_mode.png'
                on_release: root.manager.current = 'ContinentsScreen'; app.assign_country_to_label(2);root.manager.get_screen('ContinentsScreen').ids.continents_toolbar.score='Score: 0';root.manager.get_screen('ContinentsScreen').ids.continents_toolbar.correct_answers='Correct answers: 0';root.manager.get_screen('ContinentsScreen').ids.continents_toolbar.streak='Current streak: 0';
            MainMenuButton:
                text:"High scores"
                subtext:"Check your best scores in different modes."
                image:'data/icons/settings.png'
                on_release: root.manager.current = 'HSScreen'; app.color_picker()
        MDBoxLayout:
            orientation:'vertical'
            size_hint_y:0.10
            MDLabel:
                text:"CopyrightÂ© Wojciech Milczarek 2021"
                font_style:'Overline'

<MainMenuButton@MDCard>:
    md_bg_color: (159/256,189/256,237/256,1)
    padding: dp(15)
    spacing: dp(15)
    radius: [dp(25),dp(25),dp(25),dp(25)]
    ripple_behavior: True
    image:""
    text:""
    subtext:""
    elevation:30
    
    orientation:'vertical'
    AnchorLayout:
        anchor_x: 'center'
        Image:
            source: root.image
            size_hint: 1,1
    MDBoxLayout:
        orientation: 'vertical'
        MDLabel:
            text:root.text
            font_style:"H6"
        MDLabel:
            text:root.subtext
            font_style:"Caption"
    

<Capitals>
    name: 'CapitalsScreen'
    MDBoxLayout:
        orientation: 'vertical'

        QuizModeToolbar:
            size_hint_y: 0.15
            id: capitals_toolbar
            score: 'Score: 0'
            correct_answers: 'Correct answers: 0'
            streak: 'Current streak: 0'
            question: 'What is the capital of: ' 

        GridLayout:
            rows:3
            size_hint_y:0.8
            FloatLayout:
                ImageButton:
                    id: question_flag
                    source:"data/flags/poland_flag-jpg-xs.jpg"
                    size_hint: (0.4,0.2)
                    pos_hint:{'center_x':0.5,'center_y':0.85}
                MDTextFieldRound:
                    id: answer
                    pos_hint:{'center_x':0.5,'center_y':0.5}
                    size_hint:(0.65,0.17)
                    font_size:"32dp"
                    halign:'center'
                    on_text_validate: app.check_answer(); app.assign_country_to_label(0); app.assign_flag()
                    

            MDBoxLayout:
                orientation:'vertical'
                size_hint_y: 0.1
                MDBottomAppBar:
                    MDToolbar:
                        icon: 'forward'
                        type: 'bottom'
                        on_action_button: app.check_answer(); app.assign_country_to_label(0); app.assign_flag()

    #Animation image displayed after correct answer
    #Image:
     #   id: gif
     #   source: ''
     #   center: self.parent.center
     #   size: 50, 50
     #   size_hint: (0.2,0.2)
     #   allow_stretch: True
     #   anim_delay: -1
     #   anim_loop: 1
     #   opacity: 0
        

<ImageButton@MDCard>:
    md_bg_color: (159/256,189/256,237/256,1)
    padding: dp(15)
    spacing: dp(15)
    radius: [dp(25),dp(25),dp(25),dp(25)]
    ripple_behavior: False
    source:""
    elevation:30
    orientation:'horizontal'
    Image:
        source: root.source
        allow_stretch: True
        size_hint_y: 1

<QuizModeToolbar@MDCard>:
    md_bg_color: (159/256,189/256,237/256,1)
    radius:[dp(0),dp(0),dp(40),dp(40)]
    size_hint: 1,0.2
    elevation: 30
    score:''
    correct_answers:''
    streak:''
    question:''

    GridLayout:
        rows: 2
        BoxLayout:
            orientation: 'horizontal'
            MDIconButton:
                on_release: app.root.current = 'MainScreen'
            MDCard:
                score: root.score
                md_bg_color: (140/256,189/256,237/256,1)
                elevation: 0
                radius: [dp(40),dp(0),dp(0),dp(40)]
                MDLabel:
                    text:root.score
                    font_style:'Button'
            MDCard:
                score: root.score
                md_bg_color: (140/256,189/256,237/256,1)
                elevation: 0
                MDLabel:
                    text: root.correct_answers
                    font_style:'Button'
            MDCard:
                score: root.score
                md_bg_color: (140/256,189/256,237/256,1)
                elevation: 0
                radius: [dp(0),dp(40),dp(40),dp(0)]
                MDLabel:
                    text: root.streak
                    font_style:'Button'
    
        MDLabel:
            text: root.question
            font_style:"H5"
    

<Flags>
    name: 'FlagsScreen'
    MDBoxLayout:
        orientation: 'vertical'

        QuizModeToolbar:
            size_hint_y: 0.15
            id: flag_toolbar
            score: 'Score: 0'
            correct_answers: 'Correct answers: 0'
            streak: 'Current streak: 0'
            question: 'What is the flag of: '

        GridLayout:
            rows: 4
            size_hint_y: 0.8
            padding: [dp(20),dp(20),dp(20),dp(20)]
            spacing: dp(20)
            ImageButton:
                id:country0
                source:"data/flags/nepal_flag-jpg-xs.jpg"
                on_press: app.check_flag(0)
            ImageButton:
                id:country1
                source:"data/flags/poland_flag-jpg-xs.jpg"
                on_press: app.check_flag(1)
            ImageButton:
                id:country2
                source:"data/flags/belarus_flag-jpg-xs.jpg"
                on_press: app.check_flag(2)
            ImageButton:
                id:country3
                source:"data/flags/russia_flag-jpg-xs.jpg"
                on_press: app.check_flag(3);


#Definition of tile, later used in continents quiz mode grid layout.
<ContinentTile@SmartTileWithStar>
    size_hint_y: None
    height: "240dp"
<Continents>
    name: 'ContinentsScreen'
    MDBoxLayout:
        orientation:'vertical'

        QuizModeToolbar:
            size_hint_y: 0.15
            id: continents_toolbar
            score: 'Score: 0'
            correct_answers: 'Correct answers: 0'
            streak: 'Current streak: 0'
            question: 'In which continent lies: '



        GridLayout:
            rows: 3
            columns: 2
            size_hint_y: 0.8
            padding: [dp(20),dp(20),dp(20),dp(20)]
            spacing: dp(20)


            ImageButton:
                id: africa
                source:'data/continents/Africa.png' 
                on_press: app.check_continent(0);app.assign_country_to_label(2)
            ImageButton:
                id: asia
                source:'data/continents/Asia.png'
                on_press: app.check_continent(1);app.assign_country_to_label(2)
            ImageButton:
                id: europe
                source:'data/continents/Europe.png' 
                on_press: app.check_continent(2);app.assign_country_to_label(2)
            ImageButton:
                id: na
                source:'data/continents/North America.png' 
                on_press: app.check_continent(3);app.assign_country_to_label(2)
            ImageButton:
                id: oceania
                source:'data/continents/Oceania.png' 
                on_press: app.check_continent(4);app.assign_country_to_label(2)
            ImageButton:
                id: sa
                source:'data/continents/South America.png' 
                on_press: app.check_continent(5);app.assign_country_to_label(2)

<HiScores>
    name: 'HSScreen'
    
    MDIconButton:
        on_press: root.manager.current = 'MainScreen'
    